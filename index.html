<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Next SpaceX launch</title>
        <link href="https://fonts.googleapis.com/css?family=Audiowide&display=swap" rel="stylesheet"> 
        <!--link rel="stylesheet" href="vendors/simple-grid.min.css"-->
        <link rel="stylesheet" href="dist/styles.css">
        
    </head>
    <body>              
        <header>
            <div class="info-container">
                <div class="next-launch-textbox">
                <h1 class="next-launch-header">
                    <span class="next-launch-header--title">Next launch in:</span>
                    <span class="next-launch-header--subtitle" id="launch-countdown">7 days 4 hours 16 minutes</span>
                </h1>
            </div>
            <div class="launch-info-container">
                <h2 class="launch-info">
                    <span class="launch-info--title">Mission:</span>
                    <span class="launch-info--subtitle" id="launch-mission">Orbcomm 0G2</span>
                </h2>
                <h2 class="launch-info">
                    <span class="launch-info--title">Customers:</span>
                    <span class="launch-info--subtitle" id="launch-customers">Pasifik Satelit Nasantara</span>
                </h2>
                <h2 class="launch-info">
                    <span class="launch-info--title">Launch Site:</span>
                    <span class="launch-info--subtitle" id="launch-site">Cape Canaveral Air Force Station Space Launch Complex 40</span>
                </h2>                
            </div>
        </div>
        </header>   
        <section class="chart">
            <h2 class="chart--header">Missions launched in the past year</h2>
            <div class="chart--container">
                <canvas id="myChart" width="40" height="40" class="chart--propper"></canvas>
            </div>
        </section>    
        <footer>
            <div class="footer">
                <ul class="footer--list">
                    <li class="footer--list__element">Powered by <a href="https://github.com/r-spacex/SpaceX-API" target="_blank" class="footer--list__link">SpaceX-API</a></li>
                    <li class="footer--list__element">Chart powered by <a href="https://www.chartjs.org/" target="_blank" class="footer--list__link">ChartsJS</a></li>
                </ul>
            </div>
        </footer>

    </body>                    
    <script src="src/resources/scripts/script.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script>        
        setTimeout(function(){
            if(pastLaunches){
                chartPastLaunches();
                console.log(pastLaunches);
            }            
        }, 2000);

        function chartPastLaunches(){

            var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July','August','September','October','November','December'];
            var pastLaunchesData = [0,0,0,0,0,0,0,0,0,0,0,0,0];            
            pastLaunches.forEach(launch => {
                lauchDate = new Date(launch.launch_date_utc);                
                pastLaunchesData[lauchDate.getMonth()] += 1;
            });
            
            var ctx = document.getElementById('myChart').getContext('2d');
            var chart = new Chart(ctx, {
                // The type of chart we want to create
                type: 'bar',
    
                // The data for our dataset
                data: {
                    labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July','August','September','October','November','December'],
                    datasets: [{
                        label: 'SpaceX launches',
                        backgroundColor: 'rgb(112, 236, 255)',
                        borderColor: 'rgb(66, 230, 255)',
                        data: pastLaunchesData
                    }]
                },
    
                // Configuration options go here
                options: {}
            });
        }
    
    </script>
</html>